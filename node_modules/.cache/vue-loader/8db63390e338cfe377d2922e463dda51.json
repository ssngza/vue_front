{"remainingRequest":"C:\\Users\\tmdgu\\vue_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tmdgu\\vue_front\\src\\@core\\layouts\\components\\app-navbar\\components\\CartDropdown.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\tmdgu\\vue_front\\src\\@core\\layouts\\components\\app-navbar\\components\\CartDropdown.vue","mtime":1683620026866},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682425602778},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\babel-loader\\lib\\index.js","mtime":1682425602675},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682425602778},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1682425630991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBCTmF2SXRlbURyb3Bkb3duLCBCQmFkZ2UsIEJNZWRpYSwgQkxpbmssIEJJbWcsIEJGb3JtU3BpbmJ1dHRvbiwgQkJ1dHRvbiwNCn0gZnJvbSAnYm9vdHN0cmFwLXZ1ZScNCmltcG9ydCBWdWVQZXJmZWN0U2Nyb2xsYmFyIGZyb20gJ3Z1ZS1wZXJmZWN0LXNjcm9sbGJhcicNCmltcG9ydCBSaXBwbGUgZnJvbSAndnVlLXJpcHBsZS1kaXJlY3RpdmUnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIEJOYXZJdGVtRHJvcGRvd24sDQogICAgQkJhZGdlLA0KICAgIEJNZWRpYSwNCiAgICBCTGluaywNCiAgICBCSW1nLA0KICAgIEJGb3JtU3BpbmJ1dHRvbiwNCiAgICBWdWVQZXJmZWN0U2Nyb2xsYmFyLA0KICAgIEJCdXR0b24sDQogIH0sDQogIGRpcmVjdGl2ZXM6IHsNCiAgICBSaXBwbGUsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGl0ZW1zOiBbXSwNCiAgICAgIHBlcmZlY3RTY3JvbGxiYXJTZXR0aW5nczogew0KICAgICAgICBtYXhTY3JvbGxiYXJMZW5ndGg6IDYwLA0KICAgICAgICB3aGVlbFByb3BhZ2F0aW9uOiBmYWxzZSwNCiAgICAgIH0sDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHRvdGFsQW1vdW50KCkgew0KICAgICAgbGV0IHRvdGFsID0gMA0KICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGkgPT4geyB0b3RhbCArPSBpLnByaWNlIH0pDQogICAgICByZXR1cm4gdG90YWwNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZmV0Y2hJdGVtcygpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhcHAtZWNvbW1lcmNlL2ZldGNoQ2FydFByb2R1Y3RzJykNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuaXRlbXMgPSByZXNwb25zZS5kYXRhLnByb2R1Y3RzDQogICAgICAgIH0pDQogICAgfSwNCiAgICByZW1vdmVJdGVtRnJvbUNhcnQocHJvZHVjdElkKSB7DQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYXBwLWVjb21tZXJjZS9yZW1vdmVQcm9kdWN0RnJvbUNhcnQnLCB7IHByb2R1Y3RJZCB9KQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtcy5maW5kSW5kZXgocCA9PiBwLmlkID09PSBwcm9kdWN0SWQpDQogICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaXRlbUluZGV4LCAxKQ0KDQogICAgICAgICAgLy8gVXBkYXRlIGNvdW50IGluIGNhcnQgaXRlbXMgc3RhdGUNCiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FwcC1lY29tbWVyY2UvVVBEQVRFX0NBUlRfSVRFTVNfQ09VTlQnLCB0aGlzLml0ZW1zLmxlbmd0aCkNCiAgICAgICAgfSkNCiAgICB9LA0KICB9LA0KfQ0K"},{"version":3,"sources":["CartDropdown.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CartDropdown.vue","sourceRoot":"src/@core/layouts/components/app-navbar/components","sourcesContent":["<template>\r\n  <b-nav-item-dropdown\r\n    class=\"dropdown-cart mr-25\"\r\n    menu-class=\"dropdown-menu-media\"\r\n    right\r\n    @show=\"fetchItems\"\r\n  >\r\n    <template #button-content>\r\n      <feather-icon\r\n        :badge=\"$store.state['app-ecommerce'].cartItemsCount\"\r\n        class=\"text-body\"\r\n        icon=\"ShoppingCartIcon\"\r\n        size=\"21\"\r\n      />\r\n    </template>\r\n\r\n    <!-- Header -->\r\n    <li class=\"dropdown-menu-header\">\r\n      <div class=\"dropdown-header d-flex\">\r\n        <h4 class=\"notification-title mb-0 mr-auto\">\r\n          My Cart\r\n        </h4>\r\n        <b-badge\r\n          pill\r\n          variant=\"light-primary\"\r\n        >\r\n          {{ $store.state['app-ecommerce'].cartItemsCount }} Items\r\n        </b-badge>\r\n      </div>\r\n    </li>\r\n\r\n    <!-- Cart Items -->\r\n    <vue-perfect-scrollbar\r\n      v-if=\"items.length\"\r\n      :settings=\"perfectScrollbarSettings\"\r\n      class=\"scrollable-container media-list scroll-area\"\r\n      tagname=\"li\"\r\n    >\r\n      <b-media\r\n        v-for=\"item in items\"\r\n        :key=\"item.name\"\r\n      >\r\n        <template #aside>\r\n          <b-img\r\n            :src=\"item.image\"\r\n            :alt=\"item.name\"\r\n            rounded\r\n            width=\"62px\"\r\n          />\r\n        </template>\r\n        <feather-icon\r\n          icon=\"XIcon\"\r\n          class=\"cart-item-remove cursor-pointer\"\r\n          @click.stop=\"removeItemFromCart(item.id)\"\r\n        />\r\n        <div class=\"media-heading\">\r\n          <h6 class=\"cart-item-title\">\r\n            <b-link class=\"text-body\">\r\n              {{ item.name }}\r\n            </b-link>\r\n          </h6>\r\n          <small class=\"cart-item-by\">By {{ item.brand }}</small>\r\n        </div>\r\n\r\n        <div class=\"cart-item-qty ml-1\">\r\n          <b-form-spinbutton\r\n            v-model=\"item.qty\"\r\n            min=\"1\"\r\n            size=\"sm\"\r\n          />\r\n        </div>\r\n\r\n        <h5 class=\"cart-item-price\">\r\n          ${{ item.price }}\r\n        </h5>\r\n      </b-media>\r\n    </vue-perfect-scrollbar>\r\n\r\n    <!-- Cart Footer -->\r\n    <li\r\n      v-if=\"items.length\"\r\n      class=\"dropdown-menu-footer\"\r\n    >\r\n      <div class=\"d-flex justify-content-between mb-1\">\r\n        <h6 class=\"font-weight-bolder mb-0\">\r\n          Total:\r\n        </h6>\r\n        <h6 class=\"text-primary font-weight-bolder mb-0\">\r\n          ${{ totalAmount }}\r\n        </h6>\r\n      </div>\r\n      <b-button\r\n        v-ripple.400=\"'rgba(255, 255, 255, 0.15)'\"\r\n        variant=\"primary\"\r\n        block\r\n        :to=\"{ name: 'apps-e-commerce-checkout' }\"\r\n      >\r\n        Checkout\r\n      </b-button>\r\n    </li>\r\n\r\n    <p\r\n      v-if=\"!items.length\"\r\n      class=\"m-0 p-1 text-center\"\r\n    >\r\n      Your cart is empty\r\n    </p>\r\n  </b-nav-item-dropdown>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  BNavItemDropdown, BBadge, BMedia, BLink, BImg, BFormSpinbutton, BButton,\r\n} from 'bootstrap-vue'\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\r\nimport Ripple from 'vue-ripple-directive'\r\n\r\nexport default {\r\n  components: {\r\n    BNavItemDropdown,\r\n    BBadge,\r\n    BMedia,\r\n    BLink,\r\n    BImg,\r\n    BFormSpinbutton,\r\n    VuePerfectScrollbar,\r\n    BButton,\r\n  },\r\n  directives: {\r\n    Ripple,\r\n  },\r\n  data() {\r\n    return {\r\n      items: [],\r\n      perfectScrollbarSettings: {\r\n        maxScrollbarLength: 60,\r\n        wheelPropagation: false,\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    totalAmount() {\r\n      let total = 0\r\n      this.items.forEach(i => { total += i.price })\r\n      return total\r\n    },\r\n  },\r\n  methods: {\r\n    fetchItems() {\r\n      this.$store.dispatch('app-ecommerce/fetchCartProducts')\r\n        .then(response => {\r\n          this.items = response.data.products\r\n        })\r\n    },\r\n    removeItemFromCart(productId) {\r\n      this.$store.dispatch('app-ecommerce/removeProductFromCart', { productId })\r\n        .then(() => {\r\n          const itemIndex = this.items.findIndex(p => p.id === productId)\r\n          this.items.splice(itemIndex, 1)\r\n\r\n          // Update count in cart items state\r\n          this.$store.commit('app-ecommerce/UPDATE_CART_ITEMS_COUNT', this.items.length)\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dropdown-cart {\r\n  .media {\r\n    .media-aside {\r\n      align-items: center;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}