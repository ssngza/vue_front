{"remainingRequest":"C:\\Users\\tmdgu\\vue_front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tmdgu\\vue_front\\src\\components\\account\\account\\Slip\\AddSlipForm.vue?vue&type=style&index=0&id=390b5bea&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\tmdgu\\vue_front\\src\\components\\account\\account\\Slip\\AddSlipForm.vue","mtime":1683620028566},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1682425630341},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1682425630991},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\postcss-loader\\src\\index.js","mtime":1682425630891},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1682425647185},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682425602778},{"path":"C:\\Users\\tmdgu\\vue_front\\node_modules\\vue-loader\\lib\\index.js","mtime":1682425630991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5yZXBlYXRlci1mb3JtIHsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgdHJhbnNpdGlvbjogLjM1cyBoZWlnaHQ7DQp9DQoNCg=="},{"version":3,"sources":["AddSlipForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0OA;AACA;AACA;AACA","file":"AddSlipForm.vue","sourceRoot":"src/components/account/account/Slip","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <MenuSlipForm\r\n        style=\"justify-content: end\"\r\n        :active-button=\"activeButton\"\r\n        :add-bt-status=\"addBtStatus\"\r\n        :add-journal-bt=\"addJournalBt\"\r\n        @submitResult=\"submit\"\r\n      />\r\n\r\n      <h1>전표</h1>\r\n      <b-table\r\n        :items=\"newSlipForm\"\r\n        :fields=\"slipFiled\"\r\n      />\r\n      <h1>분개 </h1>\r\n      <b-table\r\n        :items=\"newJournalForm\"\r\n        :fields=\"journalFiled\"\r\n        striped\r\n        responsive\r\n        select-mode=\"single\"\r\n        selectable\r\n        @row-selected=\"onRowSelected\"\r\n      />\r\n\r\n      <h1>분개상세 </h1>\r\n      <b-table\r\n        :fields=\"JournaldetailFiled\"\r\n        :items=\"newJournalDetailForm\"\r\n        striped\r\n        responsive\r\n      />\r\n      <div />\r\n    </div>\r\n    <div>\r\n      <!-- 모달은 id 이용-->\r\n      <!-- 전표추가 모달-->\r\n      <!--하나의 inputForm 태그 사용 < 조건을 props로 내려줌>-->\r\n      <b-modal\r\n        id=\"openAddSlipModal\"\r\n        title=\"전표추가\"\r\n        @ok=\"completeSilpForm\"\r\n      >\r\n        <p class=\"my-5\">\r\n          <InputForm\r\n            ref=\"inputSlipForm\"\r\n            modal-status=\"addSlip\"\r\n          />\r\n        </p>\r\n      </b-modal>\r\n      <!-- 분개추가 모달 -->\r\n      <b-modal\r\n        id=\"openAddJounalModal\"\r\n        title=\"분개추가\"\r\n        @ok=\"completeJounalForm\"\r\n      >\r\n        <p class=\"my-5\">\r\n          <InputForm\r\n            ref=\"inputJounalForm\"\r\n            modal-status=\"addJounal\"\r\n          />\r\n        </p>\r\n      </b-modal>\r\n      <!--분개상세 모달 -->\r\n      <b-modal\r\n        id=\"openAddJounalDetailModal\"\r\n        title=\"분개상세추가\"\r\n        @ok=\"completeJounalDetailForm\"\r\n      >\r\n        <p class=\"my-5\">\r\n          <InputForm\r\n            ref=\"inputJounalDetailForm\"\r\n            modal-status=\"addJounalDetail\"\r\n          />\r\n        </p>\r\n      </b-modal>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { BTable } from 'bootstrap-vue'\r\nimport { mapActions } from 'vuex'\r\nimport MenuSlipForm from './MenuSlipForm.vue'\r\nimport InputForm from './InputForm.vue'\r\nimport { slipFiled, journalFiled, JournaldetailFiled } from '../fields'\r\n\r\nexport default {\r\n  components: {\r\n    BTable,\r\n    MenuSlipForm,\r\n    InputForm,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      /**\r\n       * 그리드 필드\r\n       */\r\n      slipFiled,\r\n      journalFiled,\r\n      JournaldetailFiled,\r\n      /**\r\n       * 그리드에 보여지는 객체\r\n       */\r\n      newSlipForm: [],\r\n      newJournalForm: [],\r\n      newJournalDetailForm: [],\r\n      /**\r\n       * 모든 결과를 담는 객체\r\n       */\r\n      resultSlipForm: {\r\n        journalList: [],\r\n      },\r\n\r\n      /**\r\n     * 선택한 분개 구분위해 사용\r\n     */\r\n      id: 1,\r\n      currentId: '',\r\n\r\n      /**\r\n     *  버튼 활성화\r\n     */\r\n      activeButton: 'addSlip',\r\n      addBtStatus: false,\r\n      addJournalBt: false,\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions('account/account', ['CREATE_SLIP', 'FETCH_SLIP']),\r\n    /**\r\n     * 모달 ok버튼 클릭시 실행되는 함수\r\n     * 전표\r\n     */\r\n    completeSilpForm() {\r\n      this.newSlipForm.push(this.$refs.inputSlipForm.slipForm)\r\n      this.resultSlipForm = { ...this.$refs.inputSlipForm.slipForm, ...this.resultSlipForm }\r\n      this.addBtStatus = true\r\n    },\r\n    /**\r\n     *  분개 모달완료시 실행\r\n     */\r\n    completeJounalForm() {\r\n      this.newJournalForm.push({ ...this.$refs.inputJounalForm.journalForm, id: this.id })\r\n      this.resultSlipForm.journalList.push({ ...this.$refs.inputJounalForm.journalForm, id: this.id, journalDetailList: [] })\r\n      this.id += 1\r\n\r\n      // 분개는 2개까지\r\n      if (this.newJournalForm.length > 1) {\r\n        this.addJournalBt = true\r\n      }\r\n    },\r\n    /**\r\n     *  분개상세 모달완료시 실행\r\n     */\r\n    completeJounalDetailForm() {\r\n      // 그리드전용 변수에 넣기\r\n      this.newJournalDetailForm.push(this.$refs.inputJounalDetailForm.journalDetailForm)\r\n\r\n      // api로 날라간 결과값에 넣기\r\n      this.resultSlipForm.journalList.forEach(v => {\r\n        if (v.id === this.currentId) {\r\n          v.journalDetailList.push(this.$refs.inputJounalDetailForm.journalDetailForm)\r\n        }\r\n\r\n        return v\r\n      })\r\n\r\n      console.log(this.resultSlipForm)\r\n    },\r\n\r\n    /**\r\n     *   분개테이블의 행 클릭시 실행되는함수(해당 분개의 상세를 만들기위한 목적)\r\n     *    this.$root.$emit(모달오픈  , 모달 아이디)\r\n     */\r\n    onRowSelected(selectedJournal) {\r\n      const { id } = selectedJournal[0]\r\n      this.currentId = id\r\n      if (window.confirm('해당 분개의 분개상세를 추가하시겠습니까?')) {\r\n        this.$root.$emit('bv::show::modal', 'openAddJounalDetailModal', '#focusThisOnClose')\r\n      }\r\n    },\r\n    /**\r\n     * 저장\r\n     */\r\n    async submit() {\r\n      /**\r\n       * 차변 대변 입력값이 같지 않을경우 경고 및 재작성요구\r\n       */\r\n      const addLeftPrice = this.resultSlipForm.journalList.map(v => Number(v.leftDebtorPrice)).reduce((pre, curr) => pre + curr, 0)\r\n      const addRightPrice = this.resultSlipForm.journalList.map(v => Number(v.rightCreditsPrice)).reduce((pre, curr) => pre + curr, 0)\r\n      if (addLeftPrice !== addRightPrice) {\r\n        // eslint-disable-next-line no-restricted-globals\r\n        if (confirm('차대가 맞지 않습니다, 차변대변을 새로 입력해주세요')) {\r\n          this.newJournalForm.splice(0)\r\n          this.resultSlipForm.journalList.splice(0)\r\n          return\r\n        }\r\n      }\r\n\r\n      const newSlipNo = await this.CREATE_SLIP(this.resultSlipForm)\r\n      console.log(newSlipNo)\r\n      this.openAlert(newSlipNo)\r\n    },\r\n\r\n    /**\r\n      * 성공시 호출되는 alert창\r\n      * 새로 생긴 전표를 router를 이용하여 보냄\r\n      */\r\n    openAlert(newSlipNo) {\r\n      this.$swal.fire({\r\n        title: '전표작성 성공!',\r\n        text: `전표번호${newSlipNo}`,\r\n        icon: 'info',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: '해당 전표를 보시겠습니까?',\r\n      }).then(result => {\r\n        if (result.isConfirmed) {\r\n          this.$router.push({ name: 'journalForm', params: { selectedSlip: newSlipNo } })\r\n        }\r\n      })\r\n    },\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.repeater-form {\r\n  overflow: hidden;\r\n  transition: .35s height;\r\n}\r\n\r\n</style>\r\n"]}]}